<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LifeLine</title>
    <link rel="stylesheet" href="./css/bootstrap.css">
    <link rel="stylesheet" href="./css/site.css">
    <script src="./js/jquery-2.1.1.min.js"></script>
    <script src="./js/bootstrap.js"></script>
    <script src="./js/moment.js"></script>
    <script src="http://getbootstrap.com/assets/js/docs.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.19/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.19/angular-resource.min.js"></script>
    <script src="http://sugarjs.com/release/current/sugar.min.js"></script>
    <script src="http://momentjs.com/downloads/moment-timezone-with-data-2010-2020.js"></script>
    <script src="./js/utils.js"></script>
    <style>
        .chart-container {
            width:100%;
            height:20em;
        }
    </style>
    <script>
        var app = angular.module('charting', ['ngResource']);

        var dateRange = getDateRange(14);

        app.controller('ChartCtrl', ['$scope', 'dataService', function ($scope, dataService) {
            dataService.getList({object: 'pick'}, function(obj) {
                var pick = formatDataForGraph(obj, 'pick');
                var sore = formatDataForGraph(obj, 'sore');
                        $(function () {
                            $('#pick').highcharts({
                                chart: {
                                    type: 'line'
                                },
                                title: {
                                    text: ''
                                },
                                xAxis: {
                                    categories: dateRange
                                },
                                yAxis: {
                                    title: {
                                        text: 'Frequency'
                                    }
                                },
                                series: [
                                    {
                                        type: 'column',
                                        name: 'pick',
                                        data: pick
                                    },
                                    {
                                        type: 'line',
                                        name: 'sore',
                                        data: sore
                                    }
                                ]
                            });
                        });
            });

            dataService.getList({object: 'water'}, function(obj) {
                        var data = formatDataForGraph(obj, 'water');
                        var minLine = [];
                        dateRange.each(function(n) {
                            minLine.push(5);
                        })
                        $(function () {
                            $('#water').highcharts({
                                title: {
                                    text: ''
                                },
                                xAxis: {
                                    categories: dateRange
                                },
                                yAxis: {
                                    title: {
                                        text: 'Frequency'
                                    }
                                },
                                series: [
                                    {
                                        type: 'line',
                                        name: 'water',
                                        data: data
                                    },
                                    {
                                        type: 'line',
                                        name: 'min',
                                        data: minLine
                                    }
                                ]
                            });
                        });
            });

            dataService.getList({object: 'weather_data'}, function(obj) {
                        var data = formatWeatherDataForGraph(obj, 'weather');
                        $(function () {
                            $('#weather').highcharts({
                                chart: {
                                    type: 'line'
                                },
                                title: {
                                    text: ''
                                },
                                xAxis: {
                                    categories: dateRange
                                },
                                yAxis: {
                                    title: {
                                        text: 'Temp'
                                    }
                                },
                                series: [data[1]]
                            });
                        });
                    });
        }]);

        app.factory('dataService', ['$q', '$resource', function ($q, $resource) {
            return $resource('data/:object/', { object: '@object' }, {
                getList: { method: 'GET', isArray: true }
            });
        }]);
    </script>
</head>
<body ng-app="charting">
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">LifeLine</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#">Dashboard</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <!--<div class="col-sm-3 col-md-2 sidebar">-->
            <!--<ul class="nav nav-sidebar">-->
                <!--<li class="active"><a href="#">Overview</a></li>-->
                <!--<li><a href="#">Reports</a></li>-->
                <!--<li><a href="#">Analytics</a></li>-->
                <!--<li><a href="#">Export</a></li>-->
            <!--</ul>-->
            <!--&lt;!&ndash;<ul class="nav nav-sidebar">&ndash;&gt;-->
                <!--&lt;!&ndash;<li><a href="">Nav item</a></li>&ndash;&gt;-->
                <!--&lt;!&ndash;<li><a href="">Nav item again</a></li>&ndash;&gt;-->
                <!--&lt;!&ndash;<li><a href="">One more nav</a></li>&ndash;&gt;-->
                <!--&lt;!&ndash;<li><a href="">Another nav item</a></li>&ndash;&gt;-->
                <!--&lt;!&ndash;<li><a href="">More navigation</a></li>&ndash;&gt;-->
            <!--&lt;!&ndash;</ul>&ndash;&gt;-->
        <!--</div>-->
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <h1 class="page-header">Dashboard</h1>

            <div class="row placeholders" ng-controller="ChartCtrl">
                <div class="col-xs-12 placeholder">
                    <div id="water" class="chart-container"></div>
                    <div id="weather" class="chart-container"></div>
                    <div id="pick" class="chart-container"></div>
                </div>
            </div>

            <!--<h2 class="sub-header">Section title</h2>-->
            <!--<div class="table-responsive">-->
                <!--<table class="table table-striped">-->
                    <!--<thead>-->
                    <!--<tr>-->
                        <!--<th>#</th>-->
                        <!--<th>Header</th>-->
                        <!--<th>Header</th>-->
                        <!--<th>Header</th>-->
                        <!--<th>Header</th>-->
                    <!--</tr>-->
                    <!--</thead>-->
                    <!--<tbody>-->
                    <!--<tr>-->
                        <!--<td>1,001</td>-->
                        <!--<td>Lorem</td>-->
                        <!--<td>ipsum</td>-->
                        <!--<td>dolor</td>-->
                        <!--<td>sit</td>-->
                    <!--</tr>-->
                    <!--</tbody>-->
                <!--</table>-->
            <!--</div>-->
        </div>
    </div>
</div>
</body>
</html>